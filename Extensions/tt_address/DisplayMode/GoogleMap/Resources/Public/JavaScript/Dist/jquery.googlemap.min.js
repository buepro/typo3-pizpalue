function initMap(){var t=document.createEvent("Event");t.initEvent("buepro.ttaddress.googlemap",!0,!0),window.dispatchEvent(t)}!function(p,t){var n="ppAddressGoogleMap",a={addresses:null,lat:46.829,lng:8.241,zoom:8};function s(t,i){this.element=t,this.options=p.extend({},a,i),this._defaults=a,this._name=n,this.map=null,this.$template=null,this.init()}s.prototype.init=function(){this._initMap(),this._initTemplate(),this._initAddresses(),this._addAddresses()},s.prototype._initMap=function(){var t;this.map||(t={lat:this.options.lat,lng:this.options.lng},this.map=new google.maps.Map(this.element,{zoom:this.options.zoom,center:t}))},s.prototype._initTemplate=function(){this.$template||(this.$template=p(this.element).siblings(".pp-ttaddress-maptemplate"))},s.prototype._initAddresses=function(){var t=this.options.addresses;if(t[0].image){var i,a,e=p(this.element).siblings(".pp-ttaddress-mapdata");for(i in t)a=p('[data-pp-amd-uid="'+t[i].uid+'"]',e),t[i].image=a.attr("data-pp-amd-imageuri"),t[i].uri=a.attr("data-pp-amd-uri")}},s.prototype._addMarker=function(t,i,a,e){var n=new google.maps.InfoWindow({content:a}),s=new google.maps.Marker({position:i,map:this.map,title:t});s.addressUid=e,s.addListener("click",p.proxy(function(){n.open(this.map,s),setTimeout(function(){var t=p('[data-pp-amt-uid="'+s.addressUid+'"] img');t.attr("src",t.attr("data-pp-amt"))},50)},this))},s.prototype._addAddresses=function(){var t,i,a=this.options.addresses;for(i in a)t=a[i],this._addMarker(this._getTitle(t),{lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)},this._getContent(t),t.uid)},s.prototype._getTitle=function(t){return t[p(this.$template).attr("data-pp-amt-markertitle")]},s.prototype._getContent=function(t){var i,a=this.$template.clone().css("display","block");for(i in p(".pp-amt-wrap",a).attr("data-pp-amt-uid",t.uid),t.image&&p(".pp-amt-image",a).attr("data-pp-amt",t.image),t){var e,n=p('[data-pp-amt="'+i+'"]',a);n.html()||n.html(t[i]),"#"===n.attr("href")&&(n.attr("href",t[i]),"email"===i&&n.attr("href","mailto:"+t[i]),"www"===i&&(-1===(e=t[i]).indexOf("http")&&(e="https://"+e),n.attr("href",e)))}return a.html()},p.fn[n]=function(i){var a,e=arguments;return i===t||"object"==typeof i?this.each(function(){p.data(this,"plugin_"+n)||p.data(this,"plugin_"+n,new s(this,i))}):"string"==typeof i&&"_"!==i[0]&&"init"!==i?(this.each(function(){var t=p.data(this,"plugin_"+n);t instanceof s&&"function"==typeof t[i]&&(a=t[i].apply(t,Array.prototype.slice.call(e,1))),"destroy"===i&&p.data(this,"plugin_"+n,null)}),a!==t?a:this):void 0}}(jQuery,(window,void document));