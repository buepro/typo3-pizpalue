function ppGoogleMapsInitMap(){var t=new Event("buepro.ttaddress.googlemap");window.dispatchEvent(t)}!function(a){var i="ppAddressGoogleMap",s={addresses:null,lat:46.829,lng:8.241,zoom:8};function e(t,e){this.element=t,this.options={...s,...e},this._defaults=s,this._name=i,this.map=null,this.template=null,this.init()}e.prototype.init=function(){this._initMap(),this._initTemplate(),this._initAddresses(),this._addAddresses()},e.prototype._initMap=function(){var t;this.map||(t={lat:this.options.lat,lng:this.options.lng},this.map=new google.maps.Map(this.element,{zoom:this.options.zoom,center:t}))},e.prototype._initTemplate=function(){this.template||(this.template=this.element.parentElement.querySelector(".pp-ttaddress-maptemplate"))},e.prototype._initAddresses=function(){const i=this.options.addresses;if(i[0].image){const s=this.element.parentElement.querySelector(".pp-ttaddress-mapdata");let t,e;for(t in i)e=s.querySelector('[data-pp-amd-uid="'+i[t].uid+'"]'),i[t].image=e.dataset.ppAmdImageuri,i[t].uri=e.dataset.ppAmdUri}},e.prototype._addMarker=function(t,e,i,s){const n=new google.maps.Marker({position:e,map:this.map,title:t}),o=new google.maps.InfoWindow({content:i});n.addressUid=s,n.addListener("click",()=>{o.open(this.map,n),setTimeout(()=>{const t=a.querySelector('[data-pp-amt-uid="'+n.addressUid+'"] img');t.setAttribute("src",t.dataset.ppAmt)},50)})},e.prototype._addAddresses=function(){var t,e,i=this.options.addresses;for(e in i)t=i[e],this._addMarker(this._getTitle(t),{lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)},this._getContent(t),t.uid)},e.prototype._getTitle=function(t){return t[this.template.dataset.ppAmtMarkertitle]},e.prototype._getContent=function(i){const t=this.template.cloneNode(!0);t.style.display="block",t.querySelector(".pp-amt-wrap").dataset.ppAmtUid=i.uid,i.image&&(t.querySelector(".pp-amt-image").dataset.ppAmt=i.image);let s;for(s in i){let e=t.querySelector('[data-pp-amt="'+s+'"]');if(e&&(e.innerHTML||(e.innerHTML=i[s]),"#"===e.getAttribute("href")&&(e.setAttribute("href",i[s]),"email"===s&&e.setAttribute("href","mailto:"+i[s]),"www"===s))){let t=i[s].match(/^[\S]*/g)[0];-1===t.indexOf("http")&&(t="https://"+t),e.setAttribute("href",t)}}return t.innerHTML},Element.prototype[i]=function(t){if(void 0===t||"object"==typeof t)return this["plugin_"+i]||(this["plugin_"+i]=new e(this,t)),this}}((window,document));