/**
 * Josh.js - A JavaScript library to animate content on page scroll.
 * Version: 1.0.8
 * Author: Al Mamun
 * License: MIT
 * Repo: https://github.com/mamunhpath/josh.js
 * Demo: https://mamunhpath.github.io/josh.js
 */

 export default class Josh{constructor(a={}){this.initClass=a.initClass||"josh-js",this.initDom=document.querySelectorAll("."+this.initClass),this.animClass=a.animClass||"animate__animated",this.offset=a.offset||.2,this.animateInMobile=!("undefined"!=typeof a.animateInMobile)||a.animateInMobile,this.onDOMChange="undefined"!=typeof a.onDOMChange&&a.onDOMChange,this.intersectOnScroll(this.initDom),this.callOnDOMChange(),this.addCss(this.initDom)}intersectionObserverCallback(a,b){const c=!this.animateInMobile&&this.isMobile();a.forEach(a=>{const d=a.target,e=d.dataset.joshAnimName,f=d.dataset.joshIteration,g=d.dataset.joshDuration,h=d.dataset.joshAnimDelay;if(a.isIntersecting){c||(d.style=d.style.cssText+`
 visibility: visible;
 animation-name: ${e};
 animation-duration: ${g};
 animation-iteration-count: ${f};
 animation-delay: ${h};
`),b.unobserve(d)}})}addCss(a){0<a.length?a.forEach(a=>{this.cssUtil(a)}):this.cssUtil(a)}cssUtil(a){const b=!this.animateInMobile&&this.isMobile();a.classList.add(this.animClass),b||(a.style=a.style.cssText+"visibility: hidden")}intersectOnScroll(a){if("IntersectionObserver"in window){const b=new IntersectionObserver(this.intersectionObserverCallback.bind(this),{root:null,rootMargin:"0px",threshold:this.offset});0<a.length?a.forEach(a=>{b.observe(a)}):b.observe(a)}else throw new Error("IntersectionObserver is not support by this browser. Try by adding pollyfil or use other library.")}callOnDOMChange(){window.addEventListener("DOMContentLoaded",()=>{if(this.onDOMChange){const a=new MutationObserver(a=>{a.forEach(a=>{const b=a.addedNodes;null!==b&&b.forEach(a=>{this.addCss(a),this.intersectOnScroll(a)})})});a.observe(document.body,{childList:!0,subtree:!0})}})}isMobile(){return /Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}}